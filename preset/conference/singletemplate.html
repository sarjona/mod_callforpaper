


<!-- Back to list (TOP: buttons before header) -->
<p class="d-print-none cfp-toolbar">
  <a href="#" class="btn btn-secondary btn-sm cfp-back cfp-btn-back" role="button" aria-label="Back to overview">
    <i class="fa fa-arrow-left" aria-hidden="true"></i> Back to overview
  </a>
  <span class="cfp-actions">
    ##edit##
    ##delete##
    <span class="cfp-btn-publish">##approve##</span>
    <span class="cfp-btn-unpublish">##disapprove##</span>
  </span>
</p>

<!-- Programme Date Header with Room -->
<div class="cfp-header" style="background: var(--moodle-orange); margin-bottom: 1rem;">
  [[Program date]] • [[Room]]
</div>

<div class="cfp-single">
  <!-- LEFT: Title (as panel header) + details -->
  <div class="cfp-column">
    <section class="cfp-panel cfp-panel-primary">
      <!-- Title goes here -->
      <header class="cfp-panel-header">[[Title]]</header>
      <div class="cfp-panel-body">
        <h4 class="cfp-subhead">Description</h4>
        <div class="cfp-abstract">[[Abstract]]</div>

        <h4 class="cfp-subhead">Target Groups</h4>
      <div class="cfp-content">
  <div class="cfp-checkbox-list">[[Target groups]]</div>
</div>

        <h4 class="cfp-subhead">Keywords</h4>
        <div class="cfp-content">[[Keywords]]</div>
      </div>
    </section>
  </div>

  <!-- RIGHT: Presenters, Teaser, Track -->
  <aside class="cfp-column cfp-column-narrow">

    <section class="cfp-panel cfp-panel-accent">
      <header class="cfp-panel-header cfp-header-orange">[[Type of session]] by...</header>
      <div class="cfp-panel-body cfp-presenters-compact">
        <div><strong>[[Name of speaker]]</strong></div>
        <div><strong>[[Further speakers names]]</strong></div>
        <div>[[Workplace]]</div>
      </div>
    </section>

    <!-- Teaser -->
    <section class="cfp-panel">
      <header class="cfp-panel-header">Teaser</header>
      <div class="cfp-panel-body cfp-photo">
        [[Image]]
      </div>
    </section>

    <!-- Track after teaser -->
    <section class="cfp-panel">
      <header class="cfp-panel-header cfp-header-alt">Track</header>
      <div class="cfp-panel-body">
        <div class="cfp-content">[[Track]]</div>
      </div>
    </section>

  </aside>
</div><!-- /cfp-single -->

<!-- Attachments & Links — bottom, full width -->
<section class="cfp-panel cfp-attachments-bottom">
  <header class="cfp-panel-header cfp-header-alt">Attachments &amp; Links</header>
  <div class="cfp-panel-body">
    <div class="cfp-attach">
      <div class="cfp-attach-row">
        <span class="cfp-attach-label">Presentation file</span>
        <span class="cfp-attach-val">[[Presentation file]]</span>
      </div>
      <div class="cfp-attach-row">
        <span class="cfp-attach-label">External link</span>
        <span class="cfp-attach-val">[[URL of presentation]]</span>
      </div>
      <div class="cfp-attach-row">
        <span class="cfp-attach-label">Recording</span>
        <span class="cfp-attach-val">[[Recording of session]]</span>
      </div>
    </div>
  </div>
</section>

<!-- Actions (bottom) -->
<p class="d-print-none cfp-toolbar">
  <a href="#" class="btn btn-secondary btn-sm cfp-back cfp-btn-back" role="button" aria-label="Back to overview">
    <i class="fa fa-arrow-left" aria-hidden="true"></i> Back to overview
  </a>
  <span class="cfp-actions">
    ##edit##
    ##delete##
    <span class="cfp-btn-publish">##approve##</span>
    <span class="cfp-btn-unpublish">##disapprove##</span>
  </span>
</p>

<!-- Back-link helper -->
<script>
(function(){
  document.querySelectorAll('.cfp-back').forEach(function(link){
    try {
      const url = new URL(window.location.href);
      const d = url.searchParams.get('d');
      if (d) {
        const list = new URL(window.location.href);
        list.searchParams.set('d', d);
        ['rid','mode','page','sesskey'].forEach(p => list.searchParams.delete(p));
        list.searchParams.set('mode', 'browse');
        link.href = list.pathname + list.search;
      } else {
        link.addEventListener('click', e => { e.preventDefault(); history.back(); });
      }
    } catch(e) {
      link.addEventListener('click', e => { e.preventDefault(); history.back(); });
    }
  });
})();
</script>

<!-- Button styling script -->
<script>
(function(){
  document.querySelectorAll('.cfp-actions a[href*="mode=edit"]').forEach(function(btn){
    btn.classList.add('btn', 'btn-sm', 'cfp-btn-edit');
    btn.innerHTML = '<i class="fa fa-pencil" aria-hidden="true"></i> Edit';
  });
  document.querySelectorAll('.cfp-actions a[href*="delete="]').forEach(function(btn){
    btn.classList.add('btn', 'btn-sm', 'cfp-btn-delete');
    btn.innerHTML = '<i class="fa fa-trash" aria-hidden="true"></i> Delete';
  });
  document.querySelectorAll('.cfp-btn-publish a').forEach(function(btn){
    btn.classList.add('btn', 'btn-sm', 'cfp-btn-approve');
    btn.innerHTML = '<i class="fa fa-check-circle" aria-hidden="true"></i> Publish';
  });
  document.querySelectorAll('.cfp-btn-unpublish a').forEach(function(btn){
    btn.classList.add('btn', 'btn-sm', 'cfp-btn-disapprove');
    btn.innerHTML = '<i class="fa fa-times-circle" aria-hidden="true"></i> Unpublish';
  });
})();
</script>

<!-- Target Groups formatting -->
<style>
.cfp-target-groups {
  display: flex;
  flex-wrap: wrap;
  gap: 0;
}

/* Make each item display inline */
.cfp-target-groups > * {
  display: inline;
}

/* Add comma after each item except the last */
.cfp-target-groups > *:not(:last-child)::after {
  content: ", ";
}

/* If target groups come as a list, handle that too */
.cfp-target-groups ul,
.cfp-target-groups ol {
  list-style: none;
  padding: 0;
  margin: 0;
  display: inline;
}

.cfp-target-groups li {
  display: inline;
}

.cfp-target-groups li:not(:last-child)::after {
  content: ", ";
}
</style>

<!-- Date formatting script -->
<script>
(function(){
  // Shorten month names in the header
  const header = document.querySelector('.cfp-header');
  if (header) {
    let text = header.innerHTML;

    // Month name replacements (long to short)
    const months = {
      'January': 'Jan',
      'February': 'Feb',
      'March': 'Mar',
      'April': 'Apr',
      'May': 'May',
      'June': 'Jun',
      'July': 'Jul',
      'August': 'Aug',
      'September': 'Sep',
      'October': 'Oct',
      'November': 'Nov',
      'December': 'Dec'
    };

    // Replace each full month name with its abbreviation
    for (const [long, short] of Object.entries(months)) {
      text = text.replace(new RegExp(long, 'g'), short);
    }

    header.innerHTML = text;
  }
})();
</script>
